<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><title>
         PLEASE name your type generics
        
    </title><meta content="PLEASE name your type generics" property=og:title><meta content="Pert's personal site" property=og:description><meta content="Pert's personal site" name=description><link href=/icon/favicon.png rel=icon type=image/png><link href=https://pert.dev/fonts.css rel=stylesheet><script src=https://pert.dev/js/codeblock.js></script><script src=https://pert.dev/js/toc.js></script><script src=https://pert.dev/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link href=https://pert.dev/atom.xml rel=alternate title=pert.dev type=application/atom+xml><link href=https://pert.dev/theme/light.css rel=stylesheet><link href=https://pert.dev/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://pert.dev/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://pert.dev/main.css media=screen rel=stylesheet><script src=https://pert.dev/js/mermaid.js></script><body><div class=content><header><div class=main><a href=https://pert.dev>pert.dev</a><div class=socials><a class=social href=https://twitter.com/rupert648 rel=me> <img alt=twitter src=https://pert.dev/social_icons/twitter.svg> </a><a class=social href=https://github.com/rupert648/ rel=me> <img alt=github src=https://pert.dev/social_icons/github.svg> </a><a class=social href=https://buymeacoffee.com/rupertcarr rel=me> <img alt=coffee src=https://pert.dev/social_icons/coffee.svg> </a></div></div><nav><a href=https://pert.dev/posts style=margin-left:.5em>/posts</a><a href=https://pert.dev/projects style=margin-left:.5em>/projects</a><a href=https://pert.dev/tags style=margin-left:.5em>/tags</a> |<a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://pert.dev/feather/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://pert.dev/feather/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><main><article><div class=title><div class=page-header>PLEASE name your type generics<span class=primary-color style=font-size:1.6em>.</span></div><div class=meta>Posted on <time>2025-12-24</time><span class=tags-label> :: Tags:</span><span class=tags> <a class=post-tag href=https://pert.dev/tags/software/>Software</a>, <a class=post-tag href=https://pert.dev/tags/rust/>Rust</a> </span></div></div><section class=body><p>WHY as software engineers when, depite all the <a href=https://programmerhumor.io/programming-memes/poor-little-i/>memes</a>, we've agreed pretty unanimously that we should use descriptive names for things, can we still not be arsed to properly name our type generics. The compiler supports more than one character people! We insist on the importance of readability, and yet as soon as we get to types our developer monkey brains seem to resort back to <code>U</code> or <code>T</code>. This may be fine (debatable) for short functions with one type parameter, but as soon as we get to more than one why are we making our lives harder than they need to be. Your LSP supports renaming them! You're one code action away from just slightly improving the readability of your codebase.<p>Take this little snippet I yoinked from some code I wrote the other day.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>fn </span><span style=color:#f29718>validate_and_transform</span><span>&lt;T, U, V, W>(
</span><span>    </span><span style=color:#ff8f40>field_name</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str</span><span>,
</span><span>    </span><span style=color:#ff8f40>map</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>HashMap&lt;</span><span style=color:#55b4d4;font-style:italic>String</span><span>, serde_json</span><span style=color:#ed9366>::</span><span>Value>,
</span><span>    </span><span style=color:#ff8f40>validator</span><span style=color:#61676ccc>:</span><span> U,
</span><span>    </span><span style=color:#ff8f40>transformer</span><span style=color:#61676ccc>:</span><span> V,
</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&lt;W>
</span><span style=color:#fa6e32>where
</span><span>    T</span><span style=color:#61676ccc>:</span><span> DeserializeOwned,
</span><span>    U</span><span style=color:#61676ccc>:</span><span> Fn(</span><span style=color:#ed9366>&</span><span>T) -> </span><span style=color:#fa6e32>bool</span><span>,
</span><span>    V</span><span style=color:#61676ccc>:</span><span> Fn(T) -> W,
</span><span>{
</span><span>    map</span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#f07171>build_key_from_field</span><span>(field_name))
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>cloned</span><span>()
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>and_then</span><span>(|</span><span style=color:#ff8f40>v</span><span>| serde_json</span><span style=color:#ed9366>::</span><span>from_value(v)</span><span style=color:#ed9366>.</span><span style=color:#f07171>ok</span><span>())
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>and_then</span><span>(|</span><span style=color:#ff8f40>v</span><span style=color:#61676ccc>:</span><span> T| </span><span style=color:#f07171>validator</span><span>(</span><span style=color:#ed9366>&</span><span>v)</span><span style=color:#ed9366>.</span><span style=color:#f07171>then_some</span><span>(v))
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(transformer)
</span><span>}
</span></code></pre><p>Now lets make this nicer<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>fn </span><span style=color:#f29718>validate_and_transform</span><span>&lt;Raw, Validator, Transformer, </span><span style=color:#55b4d4;font-style:italic>Result</span><span>>(
</span><span>    </span><span style=color:#ff8f40>field_name</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str</span><span>,
</span><span>    </span><span style=color:#ff8f40>map</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>HashMap&lt;</span><span style=color:#55b4d4;font-style:italic>String</span><span>, serde_json</span><span style=color:#ed9366>::</span><span>Value>,
</span><span>    </span><span style=color:#ff8f40>validator</span><span style=color:#61676ccc>:</span><span> Validator,
</span><span>    </span><span style=color:#ff8f40>transformer</span><span style=color:#61676ccc>:</span><span> Transformer,
</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&lt;</span><span style=color:#55b4d4;font-style:italic>Result</span><span>>
</span><span style=color:#fa6e32>where
</span><span>    Raw</span><span style=color:#61676ccc>:</span><span> DeserializeOwned,
</span><span>    Validator</span><span style=color:#61676ccc>:</span><span> Fn(</span><span style=color:#ed9366>&</span><span>Raw) -> </span><span style=color:#fa6e32>bool</span><span>,
</span><span>    Transformer</span><span style=color:#61676ccc>:</span><span> Fn(Raw) -> Result,
</span><span>{
</span><span>    map</span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#f07171>build_key_from_field</span><span>(field_name))
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>cloned</span><span>()
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>and_then</span><span>(|</span><span style=color:#ff8f40>v</span><span>| serde_json</span><span style=color:#ed9366>::</span><span>from_value(v)</span><span style=color:#ed9366>.</span><span style=color:#f07171>ok</span><span>())
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>and_then</span><span>(|</span><span style=color:#ff8f40>v</span><span style=color:#61676ccc>:</span><span> Raw| </span><span style=color:#f07171>validator</span><span>(</span><span style=color:#ed9366>&</span><span>v)</span><span style=color:#ed9366>.</span><span style=color:#f07171>then_some</span><span>(v))
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(transformer)
</span><span>}
</span></code></pre><p>isn't that so much better! We can take it one step further by adding in the type parameter to the serde call<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>fn </span><span style=color:#f29718>validate_and_transform</span><span>&lt;Raw, Validator, Transformer, </span><span style=color:#55b4d4;font-style:italic>Result</span><span>>(
</span><span>    </span><span style=color:#ff8f40>field_name</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str</span><span>,
</span><span>    </span><span style=color:#ff8f40>map</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>HashMap&lt;</span><span style=color:#55b4d4;font-style:italic>String</span><span>, serde_json</span><span style=color:#ed9366>::</span><span>Value>,
</span><span>    </span><span style=color:#ff8f40>validator</span><span style=color:#61676ccc>:</span><span> Validator,
</span><span>    </span><span style=color:#ff8f40>transformer</span><span style=color:#61676ccc>:</span><span> Transformer,
</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&lt;</span><span style=color:#55b4d4;font-style:italic>Result</span><span>>
</span><span style=color:#fa6e32>where
</span><span>    Raw</span><span style=color:#61676ccc>:</span><span> DeserializeOwned,
</span><span>    Validator</span><span style=color:#61676ccc>:</span><span> Fn(</span><span style=color:#ed9366>&</span><span>Raw) -> </span><span style=color:#fa6e32>bool</span><span>,
</span><span>    Transformer</span><span style=color:#61676ccc>:</span><span> Fn(Raw) -> Result,
</span><span>{
</span><span>    map</span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#f07171>build_key_from_field</span><span>(field_name))
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>cloned</span><span>()
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>and_then</span><span>(|</span><span style=color:#ff8f40>v</span><span>| serde_json</span><span style=color:#ed9366>::</span><span>from_value</span><span style=color:#ed9366>::</span><span>&lt;Raw>(v)</span><span style=color:#ed9366>.</span><span style=color:#f07171>ok</span><span>())
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>and_then</span><span>(|</span><span style=color:#ff8f40>v</span><span style=color:#61676ccc>:</span><span> Raw| </span><span style=color:#f07171>validator</span><span>(</span><span style=color:#ed9366>&</span><span>v)</span><span style=color:#ed9366>.</span><span style=color:#f07171>then_some</span><span>(v))
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(transformer)
</span><span>}
</span></code></pre><p>I've found LLMs are equally culpable of this, so its still on you to make sure your code is readable.<p>People much smarter than me <a href=https://github.com/tokio-rs/tokio/blob/d666068be7489a7ff49b3ac3f6b61ccee0839972/tokio-util/src/codec/framed_read.rs#L180>example</a> are equally gullible of doing this, I think its just somewhere we can each make each others lives that little bit easier.</section></article></main><div class=viewcount></div><div class=giscus></div><script async src=/js/view-count.js></script><script async crossorigin issue-term=pathname repo=rupert648/pert.dev src=https://utteranc.es/client.js theme=github-dark></script></div>